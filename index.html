<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Simulador Sistema Pegasus HWM - Válvula PRV</title>
    <style>
        body { font-family: sans-serif; background: #f0f4f8; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 600px; text-align: center; }
        .valve-box { width: 300px; height: 150px; border: 4px solid #333; margin: 20px auto; position: relative; background: #ddd; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .gate { width: 100%; height: 80%; background: #2c3e50; position: absolute; top: 10%; transition: transform 0.5s ease-in-out; }
        .water { position: absolute; height: 100%; background: #3498db; opacity: 0.6; z-index: -1; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        button { padding: 10px; cursor: pointer; border: none; border-radius: 5px; background: #0056b3; color: white; font-weight: bold; }
        button:hover { background: #004494; }
        .status { margin-top: 20px; padding: 10px; border: 1px solid #ccc; font-family: monospace; }
        h1 { color: #0056b3; font-size: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Simulación de Control PRV - HWM Pegasus</h1>
        <div class="valve-box">
            <div id="waterFlow" class="water" style="width: 20%;"></div>
            <div id="gate" class="gate" style="transform: translateY(0%);"></div>
            <span style="z-index: 10; font-weight: bold; color: white;">VÁLVULA</span>
        </div>
        
        <div class="status" id="panel">
            MODO: Manual | Presión Salida: <span id="pOut">0</span> BAR
        </div>

        <div class="controls">
            <button onclick="controlar(0)">CERRAR (100% Cámara Sup.)</button>
            <button onclick="controlar(100)">VENTEO TOTAL (Pegasus+)</button>
            <button onclick="modular('baja')">MODULAR: Baja Presión</button>
            <button onclick="modular('alta')">MODULAR: Alta Presión</button>
        </div>
        
        <p style="font-size: 12px; color: #666; margin-top: 20px;">
            Simulación basada en el sistema <b>HWM Pegasus</b>. La modulación ajusta el piloto hidráulico electrónicamente.
        </p>
    </div>

    <script>
        const gate = document.getElementById('gate');
        const water = document.getElementById('waterFlow');
        const pDisplay = document.getElementById('pOut');
        const panel = document.getElementById('panel');

        function actualizarUI(apertura, modo, bar) {
            // Apertura 0 (cerrado) a 100 (abierto total)
            gate.style.transform = `translateY(-${apertura}%)`;
            water.style.width = `${20 + (apertura * 0.8)}%`;
            pDisplay.innerText = bar.toFixed(1);
            panel.innerHTML = `MODO: ${modo} | Presión Salida: <span id="pOut">${bar.toFixed(1)}</span> BAR`;
        }

        function controlar(apertura) {
            let p = apertura === 0 ? 0.2 : 6.0;
            let modo = apertura === 100 ? "Venteo Pegasus+ (Total)" : "Cierre Forzado";
            actualizarUI(apertura, modo, p);
        }

        function modular(tipo) {
            if(tipo === 'baja') {
                actualizarUI(30, "Modulación por Tiempo/Caudal", 2.5);
            } else {
                actualizarUI(70, "Punto Crítico Activo", 4.8);
            }
        }
    </script>
</body>
</html>
